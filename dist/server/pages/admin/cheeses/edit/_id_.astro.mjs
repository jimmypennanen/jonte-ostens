/* empty css                                         */
import { e as createComponent, f as createAstro, k as renderComponent, r as renderTemplate, l as defineScriptVars, h as addAttribute, m as maybeRenderHead } from '../../../../chunks/astro/server_CUZ8bU2-.mjs';
import 'piccolore';
import { $ as $$AdminLayout } from '../../../../chunks/AdminLayout_B3d8O62l.mjs';
import { g as getCheese } from '../../../../chunks/index_lH4WeDz9.mjs';
export { renderers } from '../../../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro();
const prerender = false;
const $$id = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$id;
  const { id } = Astro2.params;
  const cheeseId = parseInt(id, 10);
  const cheese = getCheese(cheeseId);
  if (!cheese) {
    return Astro2.redirect("/admin/cheeses");
  }
  return renderTemplate`${renderComponent($$result, "AdminLayout", $$AdminLayout, { "title": `Redigera ${cheese.name}`, "currentPath": "/admin/cheeses" }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<div> <h1 class="text-3xl font-display font-bold text-dark-brown mb-8">\nRedigera ost\n</h1> <div class="max-w-2xl"> <form id="cheese-form" class="card space-y-6"> <div> <label for="name" class="block text-sm font-semibold text-dark-brown mb-2">\nOstens namn *\n</label> <input type="text" id="name" name="name" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div> <label for="price" class="block text-sm font-semibold text-dark-brown mb-2">\nPris *\n</label> <input type="text" id="price" name="price" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div> <label for="description" class="block text-sm font-semibold text-dark-brown mb-2">\nBeskrivning *\n</label> <textarea id="description" name="description" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown resize-none">', '</textarea> </div> <div> <label for="pairing" class="block text-sm font-semibold text-dark-brown mb-2">\nPassar till *\n</label> <input type="text" id="pairing" name="pairing" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div id="error-message" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4"> <p id="error-text"></p> </div> <div class="flex gap-4"> <button type="submit" class="flex-1 bg-dark-green text-cream px-6 py-3 rounded-lg font-bold hover:bg-dark-green/90 transition-colors">\nSpara \xE4ndringar\n</button> <a href="/admin/cheeses" class="flex-1 bg-dark-brown/20 text-dark-brown px-6 py-3 rounded-lg font-bold hover:bg-dark-brown/30 transition-colors text-center">\nAvbryt\n</a> </div> </form> </div> </div> <script>(function(){', "\n    const form = document.getElementById('cheese-form') as HTMLFormElement;\n    const errorMessage = document.getElementById('error-message');\n    const errorText = document.getElementById('error-text');\n\n    form?.addEventListener('submit', async (e: Event) => {\n      e.preventDefault();\n\n      const formData = new FormData(form);\n      const name = formData.get('name') as string;\n      const price = formData.get('price') as string;\n      const description = formData.get('description') as string;\n      const pairing = formData.get('pairing') as string;\n\n      try {\n        const response = await fetch(`/api/cheeses/${cheeseId}`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ name, price, description, pairing }),\n        });\n\n        if (response.ok) {\n          // Redirect to cheeses list\n          window.location.href = '/admin/cheeses';\n        } else {\n          const error = await response.json();\n          errorText!.textContent = error.error || 'Fel vid uppdatering av ost';\n          errorMessage!.classList.remove('hidden');\n        }\n      } catch (error) {\n        errorText!.textContent = 'Ett fel uppstod. F\xF6rs\xF6k igen senare.';\n        errorMessage!.classList.remove('hidden');\n        console.error('Form error:', error);\n      }\n    });\n  })();<\/script> "], [" ", '<div> <h1 class="text-3xl font-display font-bold text-dark-brown mb-8">\nRedigera ost\n</h1> <div class="max-w-2xl"> <form id="cheese-form" class="card space-y-6"> <div> <label for="name" class="block text-sm font-semibold text-dark-brown mb-2">\nOstens namn *\n</label> <input type="text" id="name" name="name" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div> <label for="price" class="block text-sm font-semibold text-dark-brown mb-2">\nPris *\n</label> <input type="text" id="price" name="price" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div> <label for="description" class="block text-sm font-semibold text-dark-brown mb-2">\nBeskrivning *\n</label> <textarea id="description" name="description" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown resize-none">', '</textarea> </div> <div> <label for="pairing" class="block text-sm font-semibold text-dark-brown mb-2">\nPassar till *\n</label> <input type="text" id="pairing" name="pairing" required', ' class="w-full px-4 py-2 rounded-lg border-2 border-dark-brown/20 focus:border-dark-green focus:outline-none text-dark-brown"> </div> <div id="error-message" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4"> <p id="error-text"></p> </div> <div class="flex gap-4"> <button type="submit" class="flex-1 bg-dark-green text-cream px-6 py-3 rounded-lg font-bold hover:bg-dark-green/90 transition-colors">\nSpara \xE4ndringar\n</button> <a href="/admin/cheeses" class="flex-1 bg-dark-brown/20 text-dark-brown px-6 py-3 rounded-lg font-bold hover:bg-dark-brown/30 transition-colors text-center">\nAvbryt\n</a> </div> </form> </div> </div> <script>(function(){', "\n    const form = document.getElementById('cheese-form') as HTMLFormElement;\n    const errorMessage = document.getElementById('error-message');\n    const errorText = document.getElementById('error-text');\n\n    form?.addEventListener('submit', async (e: Event) => {\n      e.preventDefault();\n\n      const formData = new FormData(form);\n      const name = formData.get('name') as string;\n      const price = formData.get('price') as string;\n      const description = formData.get('description') as string;\n      const pairing = formData.get('pairing') as string;\n\n      try {\n        const response = await fetch(\\`/api/cheeses/\\${cheeseId}\\`, {\n          method: 'PUT',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({ name, price, description, pairing }),\n        });\n\n        if (response.ok) {\n          // Redirect to cheeses list\n          window.location.href = '/admin/cheeses';\n        } else {\n          const error = await response.json();\n          errorText!.textContent = error.error || 'Fel vid uppdatering av ost';\n          errorMessage!.classList.remove('hidden');\n        }\n      } catch (error) {\n        errorText!.textContent = 'Ett fel uppstod. F\xF6rs\xF6k igen senare.';\n        errorMessage!.classList.remove('hidden');\n        console.error('Form error:', error);\n      }\n    });\n  })();<\/script> "])), maybeRenderHead(), addAttribute(cheese.name, "value"), addAttribute(cheese.price, "value"), addAttribute(4, "rows"), cheese.description, addAttribute(cheese.pairing, "value"), defineScriptVars({ cheeseId })) })}`;
}, "/Users/jimmypennanen/Documents/GitHub/jonte-osten/src/pages/admin/cheeses/edit/[id].astro", void 0);

const $$file = "/Users/jimmypennanen/Documents/GitHub/jonte-osten/src/pages/admin/cheeses/edit/[id].astro";
const $$url = "/admin/cheeses/edit/[id]";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$id,
  file: $$file,
  prerender,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
